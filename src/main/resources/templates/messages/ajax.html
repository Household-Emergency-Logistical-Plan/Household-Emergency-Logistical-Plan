<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>View all Messages using AJAX</title>
    <link th:replace="partials/links :: links"/>

    <!--    <link rel="stylesheet" href="/static/css/messages.css">-->
    <style>
        /* Chat containers */
        .container {
            border: 2px solid #dedede;
            background-color: #f1f1f1;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
        }

        /* Darker chat container */
        .darker {
            border-color: #ccc;
            background-color: #ddd;
        }

        /* Clear floats */
        .container::after {
            content: "";
            clear: both;
            display: table;
        }

        /* Style images */
        .container img {
            float: left;
            max-width: 60px;
            width: 100%;
            margin-right: 20px;
            border-radius: 50%;
        }

        /* Style the right image */
        .container img.right {
            float: right;
            margin-left: 20px;
            margin-right: 0;
        }

        /* Style time text */
        .time-right {
            float: right;
            color: #aaa;
        }

        /* Style time text */
        .time-left {
            float: left;
            color: #999;
        }
    </style>

</head>
<body>

<div id="messages">
    <div>

    </div>

<!--    <div class="container darker">-->
<!--        <img src="/w3images/avatar_g2.jpg" alt="Avatar" class="right">-->
<!--        <p>Hey! I'm fine. Thanks for asking!</p>-->
<!--        <span class="time-left">11:01</span>-->
<!--    </div>-->
</div>


<div th:replace="partials/scripts :: scripts"></div>


<!--<form th:action="@{/messages/submit}" th:method="post" th:object="${message}">-->
<!--    <textarea class="form-control" th:field="*{body}" cols="72" rows="5"></textarea>-->
<!--    <br/>-->
<!--    <input type="submit"/>-->
<!--</form>-->
<!-- include the JS file with the AJAX request -->
<script type="text/javascript">
    (function ($) {
        var request = $.ajax({'url': '/messages.json'});
        request.done(function (messages) {
            var html = '';
            messages.forEach(function (message) {
                html += '<div class="container">';
                html += '<span className="time-right">'+ message.createDateTime +'</span>';
                // html += '<img src="/w3images/bandmember.jpg" alt="Avatar">';
                html += '<p>' + message.owner.firstName + message.owner.lastName + '</p>';
                html += '<p>' + message.body + '</p>';
                html += '</div>';
            });
            $('#messages div').html(html);
        });
    })(jQuery);
</script>
<div th:replace="partials/scripts :: scripts"></div>
</body>
</html>